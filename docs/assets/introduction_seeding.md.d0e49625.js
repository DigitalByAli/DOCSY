import { _ as _export_sfc, o as openBlock, c as createElementBlock, a as createStaticVNode } from "./app.4c7a0c6b.js";
const __pageData = JSON.parse('{"title":"Seeding","description":"","frontmatter":{},"headers":[],"relativePath":"introduction/seeding.md"}');
const _sfc_main = { name: "introduction/seeding.md" };
const _hoisted_1 = /* @__PURE__ */ createStaticVNode('<h1 id="seeding" tabindex="-1">Seeding <a class="header-anchor" href="#seeding" aria-hidden="true">#</a></h1><p>Seeding is the process of adding a starting set of data to your database. Create a new file and folder <code>/seed/seed.ts</code> with the following content:</p><div class="language-ts"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">hash</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">seed</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;oksy&#39;</span><span style="color:#D4D4D4;">;</span></span>\n<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">Membership</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;../models/Core/Membership&#39;</span><span style="color:#D4D4D4;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#C586C0;">export</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">default</span><span style="color:#D4D4D4;"> </span><span style="color:#DCDCAA;">seed</span><span style="color:#D4D4D4;">(</span><span style="color:#569CD6;">async</span><span style="color:#D4D4D4;"> ({ </span><span style="color:#9CDCFE;">reactiveStore</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">sqliteClient</span><span style="color:#D4D4D4;"> }) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// optional: reset the database</span></span>\n<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#C586C0;">for</span><span style="color:#D4D4D4;"> (</span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">tableName</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">of</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">await</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">sqliteClient</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">getTableNames</span><span style="color:#D4D4D4;">()) {</span></span>\n<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#C586C0;">if</span><span style="color:#D4D4D4;"> (</span><span style="color:#9CDCFE;">tableName</span><span style="color:#D4D4D4;"> === </span><span style="color:#CE9178;">&#39;session&#39;</span><span style="color:#D4D4D4;">) </span><span style="color:#C586C0;">continue</span><span style="color:#D4D4D4;">; </span><span style="color:#6A9955;">// don&#39;t delete the `session` table</span></span>\n<span class="line"><span style="color:#D4D4D4;">		</span><span style="color:#C586C0;">await</span><span style="color:#D4D4D4;"> </span><span style="color:#9CDCFE;">sqliteClient</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">dropAllRows</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">tableName</span><span style="color:#D4D4D4;">);</span></span>\n<span class="line"><span style="color:#D4D4D4;">	}</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// create a new workspace</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">workspace</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">reactiveStore</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">modelMaker</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">create</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;Workspace&#39;</span><span style="color:#D4D4D4;">);</span></span>\n<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#9CDCFE;">workspace</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&#39;My Project&#39;</span><span style="color:#D4D4D4;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// create an admin user</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">user</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">reactiveStore</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">modelMaker</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">create</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;User&#39;</span><span style="color:#D4D4D4;">);</span></span>\n<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#9CDCFE;">user</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&#39;admin&#39;</span><span style="color:#D4D4D4;">;</span></span>\n<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#9CDCFE;">user</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">email</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&#39;info@admin.nl&#39;</span><span style="color:#D4D4D4;">;</span></span>\n<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#9CDCFE;">user</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">passwordHash</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">hash</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;password&#39;</span><span style="color:#D4D4D4;">); </span><span style="color:#6A9955;">// password is &#39;password&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// add admin user to the workspace</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">membership</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">Membership</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">workspace</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">database</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">create</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;Membership&#39;</span><span style="color:#D4D4D4;">);</span></span>\n<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#9CDCFE;">membership</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">user</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">user</span><span style="color:#D4D4D4;">;</span></span>\n<span class="line"><span style="color:#D4D4D4;">	</span><span style="color:#9CDCFE;">membership</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">workspace</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">workspace</span><span style="color:#D4D4D4;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// add the toyota brand</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">brand1</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">workspace</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">database</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">create</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;Brand&#39;</span><span style="color:#D4D4D4;">);</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">brand1</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&#39;Toyota&#39;</span><span style="color:#D4D4D4;">;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// add the mercedes-benz brand</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">brand2</span><span style="color:#D4D4D4;"> = </span><span style="color:#9CDCFE;">workspace</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">database</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">create</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;Brand&#39;</span><span style="color:#D4D4D4;">);</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">brand2</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;"> = </span><span style="color:#CE9178;">&#39;Mercedes-Benz&#39;</span><span style="color:#D4D4D4;">;</span></span>\n<span class="line"><span style="color:#D4D4D4;">});</span></span>\n<span class="line"></span></code></pre></div><p>The seeder only runs <strong>on boot</strong> of OKSY, so for your seeder to take effect we need to <strong>restart the server</strong>. Press <code>&lt;ctrl&gt; + c</code> to stop the server.</p>', 4);
const _hoisted_5 = [
  _hoisted_1
];
function _sfc_render(_ctx, _cache, $props, $setup, $data, $options) {
  return openBlock(), createElementBlock("div", null, _hoisted_5);
}
const seeding = /* @__PURE__ */ _export_sfc(_sfc_main, [["render", _sfc_render]]);
export {
  __pageData,
  seeding as default
};
